language: php
sudo: true
php:
- 5.4
matrix:
  fast_finish: true
env:
  global:
  - PATH="$PATH:$HOME/.composer/vendor/bin"
  - DRUPAL_TI_MODULE_NAME="scheduler"
  - DRUPAL_TI_SIMPLETEST_GROUP="Scheduler"
  - DRUPAL_TI_ENVIRONMENT="drupal-7"
  - DRUPAL_TI_DB="drupal_travis_db"
  - DRUPAL_TI_DB_URL="mysql://root:@127.0.0.1/drupal_travis_db"
  - DRUPAL_TI_WEBSERVER_URL="http://127.0.0.1"
  - DRUPAL_TI_WEBSERVER_PORT="8080"
  - DRUPAL_TI_SIMPLETEST_ARGS="--verbose --color --concurrency 4 --url $DRUPAL_TI_WEBSERVER_URL:$DRUPAL_TI_WEBSERVER_PORT"
  - DRUPAL_TI_BEHAT_DIR="./tests/behat"
  - DRUPAL_TI_BEHAT_ARGS=""
  - DRUPAL_TI_BEHAT_YML="behat.yml.dist"
  - DRUPAL_TI_BEHAT_SCREENSIZE_COLOR="1280x1024x16"
  - DRUPAL_TI_BEHAT_SELENIUM_VERSION="2.48.2"
  - DRUPAL_TI_BEHAT_DRIVER="phantomjs"
  - DRUPAL_TI_BEHAT_BROWSER="firefox"
  - DRUPAL_TI_PHPUNIT_ARGS=""
  - DRUPAL_TI_COVERAGE="satooshi/php-coveralls:0.6.*"
  - DRUPAL_TI_COVERAGE_FILE="build/logs/clover.xml"
  - DRUPAL_TI_SIMPLETEST_COVERAGE="1"
  - DRUPAL_TI_SIMPLETEST_COVERAGE_GENERATE_BADGES="1"
  - DRUPAL_TI_SIMPLETEST_COVERAGE_PHP_VERSION="5.4"
  - secure: ZkrEh3VWkbLGsXkfIllOg5ffTpccJGkRPhcrdjQ4CBZBoQLMoH5aGiKHng3O2vHCJ0wLWTM1nh2lYonIKHNdokNl2Y/kt5BF8RoTq0yvvWU2SqebTn1KWhRWqPOWAtLEViyw3C/Cs9VmymmsP257sTjq52BJqv45TRbHGKM9vqIFDEMQ1gEziKaO6BYj4mKRx2c9InFkLNWP9Otc/lYQLgkvBMBCzK/dGprvCOWRWjX87Ro+psUdwpi0uFF+Db+e6SUpGV/K+zGIkWbi0eQ7iGXrUkdpBmP7/crP25tr4VJvjo7mQcpMcQhBOh9FkFCOVtlpuwQRcrzhGa484vtVlVdRr9WiKHV2YZM3AqaMpUgsmiEy2fYgY419cBWem6OEWCAuGMjCEIxYA4aJYbJ7A8UXIrTa+IGCsAW6jcQoePxZ9pBNPKCmYtKf2EcnIwrdq70W6+SJiT40EKmS/oaYG305IXxOt430pjGCswaCg1KJJvO3Z/Ti8oCVenc2JzysJF2hkttNjMjiaqB4vbcyIxzRQJi3U91Q4hSE6p8exRFPEQ1oMf+P2yEf3DumMF6HPqqlLMfUPP889zfFFa7CAyaPb9wPSQ6ARaIH4qqlbdyd1OUjrR7Y2D2eYKyIenyS1KQkw5cEJc3QclQQ6sX1tAfMPwsRt5DsqfCH1/L3udA=
  - secure: U+4TFZgcc4cNF+7TdRMEPVrRr8Ud2Ge8d716XtzrvFxwuGlqnW64W49WiCYrV+5NlRzxdsB6dw04XgIr54FtZY6azlLK5uKwYHI20iT4nk8/+hLrVOf8Qp0DM6XI9i2CpKJuv4qUL9LRbhBGNbpRmp/xy7MnlfL/PyCQuAHHQ/qlcf7vCuMhViVTwMZw4mk+pUJ7I78bQjpX1l4txCP4roibYslgdhO/i84B4+PaBLk9K+Y4KCziTBRjn3lVp+ZTol4yHZr7u8Cz/4uMehpqkflDSsoZ6dfmAxWsphWDOdSeyB1pgix4nDTfbw3pV91qTX4keqlFhOrWpBeft2fjrqGRtSk83Pt6gmWlssKNEUD5jrr3zc9qOwDJUv27kf/G5nRWBXWv+lDcyoYEJw3huOicuhNOXY8TM/ZSoh1uSdkk3im45h6tO7uJhcib4SufA74ZjIZ0pSXdcMYJN5QXCso1Ye335w+mXVZdQ3rP4fJtoXxcD45lki5vQmHsCR/QZlw7NCW5ik7oHBDA/9oGk3BnkA8JWIPnrx0dCejnQ807HnASoAcVnxfapF7cfMP7bErpITbWJOIaMZfSK+7n6eHwxYCEO6Jf2EQgy7w7n0BjBPesXHeHJBTMtqNaTVK8Z8l6w75ZD8n8ssCJ61BD5QN9bnIUSRWYHpeKlVArcFw=
  - secure: Mtigh6aUvQtIcOQF9uuity3/ym6pMFKsdjGdVOmNfJ5YQORGifqgUHB5dH3Pa7okduSX+YZWlD0J5INmukrIS1xfCn7DRTAvCaf5Bbt3pS09/pbADopY+VfWPebng69YQovcuD8BmPXCqmasOUp53dfskcMpcWMvacbFipKx0a/LH9uxb1rk/WFh8d8fxAK4jJLqdX6j86rc1Udbgsa5xaJdIJRqWcqchAraVZMG3N8k+exPfD4Visn8EKHTlxolknxQZufpRGoKsXQDKkP7EC6rh2Tku9Tnxutf4eKMRdfkUYUtlniyroGqy38QttZPL3/UqWo058tMZhbzxcCTEk3NH+/vfDmgmI4QDqyDbtayVsPcgjKrKGvyQSLXTPglGRp4O9M3TPmnm2OlfW9Z9jkaG0UJPagcRNx0gTBoGGW1QjQFrFCgtTgdExTZKTQ+LxvwNSgYIF//ASxkYgP0B35UjiCDRKlieYK0ZzX/NV9XI+vqD80aevO2jLN7q1cZyc3zBP0l7CBZP8Z8Cb34PzTZ9He3w7EMC/17FZ+Gn2bk+24cSAd5YexYY+0OxtZF865RXyoIBDcDJpI802njVshCcsteOhOJpPC2O8h8df4J/mZLNinCXi924nLGjIP1ErUMhyNDinekPHU0voUfqOyE8xsjHlcol/NC1NcJQBY=
  matrix:
  - DRUPAL_TI_RUNNERS="simpletest"
mysql:
  database: drupal_travis_db
  username: root
  encoding: utf8
before_install:
- composer self-update
- git clone --branch dev-add-coverage-support https://github.com/legovaer/drupal_ti
- mkdir -p "$HOME/.composer/vendor/bin"
- ln -sf $(pwd)/drupal_ti/drupal-ti "$HOME/.composer/vendor/bin"
- cd ./tests
- drupal-ti before_install
install:
- drupal-ti install
before_script:
- drupal-ti before_script
- drupal-ti drush en date -y
script:
- drupal-ti script
after_script:
- drupal-ti after_script
notifications:
  email: false
